import{r as l,a as v,j as e,u as P}from"./index-tczcSmrJ.js";import{Q as j,B as u}from"./ReactToastify-BfB5xRnB.js";function k({userData:s}){const[o,d]=l.useState(!1),[a,i]=l.useState(!1),[r,c]=l.useState(!1),[p,h]=l.useState(""),[m,b]=l.useState(""),[f,x]=l.useState(""),{updateUser:g,deleteUser:w}=l.useContext(v);if(!s)return;const t=n=>{n.preventDefault(),i(!a)},y=n=>{n.preventDefault(),d(!o)},C=async n=>{n.preventDefault();try{await g(s.id,p,m,f),u.success("Successful updated!")}catch{u.error("Update failed. Please try again.")}},S=async()=>{try{await w(s.id),u.success("Successful deleted!")}catch{u.error("Delete failed. Please try again.")}};return e.jsxs("div",{children:[e.jsx(j,{}),e.jsxs("form",{className:"w-fit p-5",onSubmit:C,children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-lg font-bold",children:"Your email"}),e.jsx("span",{className:"font-semibold",children:s.userEmail})]}),e.jsxs("div",{className:"flex flex-col gap-y-2 my-5",children:[e.jsx("label",{className:"text-lg font-bold",children:"Your username"}),e.jsx("input",{onChange:n=>h(n.target.value),className:" w-full text-black outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",type:"text",defaultValue:s.userName}),e.jsx("label",{className:"text-lg font-bold",children:"Current password"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:t,className:"absolute right-1 top-2",children:a?e.jsx("svg",{fill:"#000000",width:"30px",height:"30px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21.92,11.6C19.9,6.91,16.1,4,12,4S4.1,6.91,2.08,11.6a1,1,0,0,0,0,.8C4.1,17.09,7.9,20,12,20s7.9-2.91,9.92-7.6A1,1,0,0,0,21.92,11.6ZM12,18c-3.17,0-6.17-2.29-7.9-6C5.83,8.29,8.83,6,12,6s6.17,2.29,7.9,6C18.17,15.71,15.17,18,12,18ZM12,8a4,4,0,1,0,4,4A4,4,0,0,0,12,8Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,12,14Z"})}):e.jsx("svg",{width:"30px",height:"30px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",children:e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 2c-1.5 0-2.8.4-3.9 1.2l.8.7C5.8 3.3 6.8 3 8 3c3.3 0 6 2.7 6 6h1c0-3.9-3.1-7-7-7zM1 3l1.6 1.5C1.6 5.7 1 7.3 1 9h1c0-1.5.5-2.8 1.4-3.8l2.2 2C5.2 7.7 5 8.3 5 9c0 1.7 1.3 3 3 3 .8 0 1.5-.3 2-.8l3 2.8.7-.7-12-11L1 3zm5.3 4.9l2.9 2.7c-.3.2-.7.4-1.2.4-1.1 0-2-.9-2-2 0-.4.1-.8.3-1.1zM11 9.5l-1-.9c-.2-.8-.9-1.5-1.8-1.6l-1-.9c.3-.1.5-.1.8-.1 1.7 0 3 1.3 3 3v.5z"})})}),e.jsx("input",{onChange:n=>b(n.target.value),className:" w-full text-black outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",type:a?"text":"password",placeholder:"Type your old password..."})]}),e.jsx("label",{className:"text-lg font-bold",children:"New password"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:y,className:"absolute right-1 top-2",children:o?e.jsx("svg",{fill:"#000000",width:"30px",height:"30px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M21.92,11.6C19.9,6.91,16.1,4,12,4S4.1,6.91,2.08,11.6a1,1,0,0,0,0,.8C4.1,17.09,7.9,20,12,20s7.9-2.91,9.92-7.6A1,1,0,0,0,21.92,11.6ZM12,18c-3.17,0-6.17-2.29-7.9-6C5.83,8.29,8.83,6,12,6s6.17,2.29,7.9,6C18.17,15.71,15.17,18,12,18ZM12,8a4,4,0,1,0,4,4A4,4,0,0,0,12,8Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,12,14Z"})}):e.jsx("svg",{width:"30px",height:"30px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",children:e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 2c-1.5 0-2.8.4-3.9 1.2l.8.7C5.8 3.3 6.8 3 8 3c3.3 0 6 2.7 6 6h1c0-3.9-3.1-7-7-7zM1 3l1.6 1.5C1.6 5.7 1 7.3 1 9h1c0-1.5.5-2.8 1.4-3.8l2.2 2C5.2 7.7 5 8.3 5 9c0 1.7 1.3 3 3 3 .8 0 1.5-.3 2-.8l3 2.8.7-.7-12-11L1 3zm5.3 4.9l2.9 2.7c-.3.2-.7.4-1.2.4-1.1 0-2-.9-2-2 0-.4.1-.8.3-1.1zM11 9.5l-1-.9c-.2-.8-.9-1.5-1.8-1.6l-1-.9c.3-.1.5-.1.8-.1 1.7 0 3 1.3 3 3v.5z"})})}),e.jsx("input",{onChange:n=>x(n.target.value),className:" w-full text-black outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",type:o?"text":"password",placeholder:"Type your new password..."})]}),e.jsx("input",{className:"bg-blue-500 rounded-xl p-2 font-bold text-white text-xl cursor-pointer",type:"submit",value:"Update"}),e.jsx("span",{children:"If you update, then you will be redirect to login"})]})]}),e.jsxs("section",{className:"flex flex-col items-start space-y-5 w-fit",children:[e.jsx("button",{onClick:()=>c(!r),className:"bg-red-500 py-2 px-5 rounded-xl text-lg font-bold text-white",children:r?"Cancel delete":"Delete Account"}),e.jsx("button",{onClick:S,className:`${r?"flex":"hidden"} bg-red-300 rounded-xl p-2 font-bold text-white`,children:"Confirm"}),e.jsx("span",{children:"If you delete your account, then you will not be able to get your information back"})]})]})}const N=[{type:"A+",description:"A Positive"},{type:"A-",description:"A Negative"},{type:"B+",description:"B Positive"},{type:"B-",description:"B Negative"},{type:"AB+",description:"AB Positive"},{type:"AB-",description:"AB Negative"},{type:"O+",description:"O Positive"},{type:"O-",description:"O Negative"}];function B({userId:s}){const{storeProfile:o}=l.useContext(v),[d,a]=l.useState(""),[i,r]=l.useState(""),[c,p]=l.useState(""),[h,m]=l.useState(""),[b,f]=l.useState(""),[x,g]=l.useState(!1),w=async t=>{t.preventDefault();try{await o(s??"",i,d,x,c,h,b),u.success("Successful stored!")}catch{u.error("Stored failed. Please try again.")}};return e.jsxs("div",{className:"my-5",children:[e.jsx(j,{}),e.jsx("h2",{className:"text-xl font-bold",children:"Store personal information"}),e.jsx("form",{className:"w-fit p-5",onSubmit:w,children:e.jsxs("div",{className:"flex flex-col space-y-2  w-fit",children:[e.jsx("label",{className:"text-lg font-bold",children:"Phone number"}),e.jsx("input",{onChange:t=>a(t.target.value),placeholder:"Type your phone number...",className:" w-full text-black outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",type:"text"}),e.jsx("label",{className:"text-lg font-bold",children:"Address"}),e.jsx("input",{onChange:t=>r(t.target.value),placeholder:"Type your phone address...",className:" w-full text-black outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",type:"text"}),e.jsx("label",{className:"text-lg font-bold",children:"Birth"}),e.jsx("input",{onChange:t=>p(t.target.value),placeholder:"Type your phone address...",className:" w-full text-black outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",type:"date"}),e.jsx("label",{className:"text-lg font-bold",children:"Gender"}),e.jsxs("select",{onChange:t=>m(t.target.value),className:" w-full text-black bg-white outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),e.jsx("label",{className:"text-lg font-bold",children:"Blood type"}),e.jsxs("select",{onChange:t=>f(t.target.value),className:" w-full text-black bg-white outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",children:[e.jsx("option",{value:"",children:"Select"}),N.map(t=>e.jsx("option",{value:t.type,children:t.description},t.type))]}),e.jsxs("div",{className:"flex gap-x-2 items-center ",children:[e.jsx("label",{className:"text-lg font-bold",children:"Insured"}),e.jsx("input",{onClick:()=>g(!x),className:"",type:"checkbox"})]}),e.jsx("input",{className:"bg-blue-500 rounded-xl p-2 font-bold text-white text-xl cursor-pointer",type:"submit",value:"Update"})]})})]})}const A=({profile:s,updateProfile:o})=>{const[d,a]=l.useState(""),[i,r]=l.useState(""),[c,p]=l.useState(!1),[h,m]=l.useState(""),[b,f]=l.useState(""),[x,g]=l.useState("");if(l.useEffect(()=>{s&&(a(s.address),r(s.phone),p(s.insured),m(s.birth),f(s.gender),g(s.blood))},[]),!s)return;const w=async t=>{t.preventDefault();try{await o(s._id,d,i,c,h,b,x),u.success("Successful updated!")}catch{u.error("Update failed. Please try again.")}};return e.jsx("div",{children:e.jsxs("div",{className:"my-5",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Personal information settings"}),e.jsx(j,{}),e.jsx("form",{className:"w-auto lg:w-fit p-5",onSubmit:w,children:e.jsxs("div",{className:"flex flex-col space-y-2  w-auto lg:w-fit",children:[e.jsx("label",{className:"text-lg font-bold",children:"Phone number"}),e.jsx("input",{defaultValue:i,onChange:t=>r(t.target.value),placeholder:"Type your phone number...",className:" w-full text-black outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",type:"text"}),e.jsx("label",{className:"text-lg font-bold",children:"Address"}),e.jsx("input",{defaultValue:d,onChange:t=>a(t.target.value),placeholder:"Type your phone address...",className:" w-full text-black outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",type:"text"}),e.jsx("label",{className:"text-lg font-bold",children:"Birth"}),e.jsx("input",{defaultValue:h,onChange:t=>m(t.target.value),placeholder:"Type your phone address...",className:" w-full text-black outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",type:"date"}),e.jsx("label",{className:"text-lg font-bold",children:"Gender"}),e.jsxs("select",{value:b,onChange:t=>f(t.target.value),className:" w-full text-black bg-white outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),e.jsx("label",{className:"text-lg font-bold",children:"Blood type"}),e.jsxs("select",{onChange:t=>g(t.target.value),value:x,className:" w-full text-black bg-white outline-none text-medium py-2 px-4 border-2 border-gray-950 input-invalid",children:[e.jsx("option",{value:"",children:"Select"}),N.map(t=>e.jsx("option",{value:t.type,children:t.description},t.type))]}),e.jsxs("div",{className:"flex gap-x-2 items-center ",children:[e.jsx("label",{className:"text-lg font-bold",children:"Insured"}),e.jsx("input",{onClick:()=>p(!c),checked:c??"checked",type:"checkbox"})]}),e.jsx("input",{className:"bg-blue-500 rounded-xl p-2 font-bold text-white text-xl cursor-pointer",type:"submit",value:"Update"})]})})]})})},I=({userData:s})=>{const{showProfile:o,updateProfile:d,profile:a}=P(),[i,r]=l.useState(null);return l.useEffect(()=>{s&&(async()=>await o(s.id))()},[s,o,a]),l.useEffect(()=>{a&&r(a)},[a]),s?e.jsxs("div",{className:"container grid grid-cols-1 lg:grid-cols-2 mx-auto my-20",children:[e.jsxs("div",{className:"space-y-5 border-2 border-black shadow-lg shadow-slate-900 p-8",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Settings"}),e.jsx("span",{className:"font-semibold",children:"Manage your account settings and preferences"}),e.jsxs("section",{className:"border-y-2 py-2",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Account settings"}),e.jsx(k,{userData:s})]}),e.jsx("section",{children:i?e.jsx(A,{profile:i,updateProfile:d}):e.jsx(B,{userId:s.id})})]}),e.jsx("div",{className:"bg-blue-700 w-full h-full"})]}):null};export{I as default};
